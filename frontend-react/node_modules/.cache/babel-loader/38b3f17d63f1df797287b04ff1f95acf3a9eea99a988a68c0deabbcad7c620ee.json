{"ast":null,"code":"import React,{useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{ThemeProvider,createTheme,CssBaseline}from'@mui/material';import AdminDashboard from'./pages/AdminDashboard';import HomePage from'./pages/HomePage';import LoginPage from'./pages/LoginPage';import Header from'./components/Header';import Footer from'./components/Footer';import{Box}from'@mui/material';import EditBooking from'./pages/EditBooking';import WhatsAppButton from'./components/WhatsAppButton';import PrivacyPolicy from'./pages/PrivacyPolicy';// Create theme instance\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const theme=createTheme({palette:{primary:{main:'#1976d2'},secondary:{main:'#dc004e'}}});// Protected Route wrapper component\nconst ProtectedRoute=_ref=>{let{children}=_ref;const token=localStorage.getItem('token');const userRole=localStorage.getItem('userRole');useEffect(()=>{console.log('Auth Debug:',{token:!!token,userRole,isAuthenticated:!!token,isAdmin:userRole==='ADMIN'});},[token,userRole]);// Check authentication\nif(!token){console.log('No token found, redirecting to login');return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Check admin role\nif(userRole!=='ADMIN'){console.log('User is not admin, redirecting to home');return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}// User is authenticated and is an admin\nreturn/*#__PURE__*/_jsx(_Fragment,{children:children});};function App(){return/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',minHeight:'100vh'},children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Box,{sx:{flex:1,py:2},children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/privacy-policy\",element:/*#__PURE__*/_jsx(PrivacyPolicy,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(AdminDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/bookings/edit/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(EditBooking,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]})}),/*#__PURE__*/_jsx(WhatsAppButton,{}),/*#__PURE__*/_jsx(Footer,{})]})})]});}export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Router","Routes","Route","Navigate","ThemeProvider","createTheme","CssBaseline","AdminDashboard","HomePage","LoginPage","Header","Footer","Box","EditBooking","WhatsAppButton","PrivacyPolicy","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","theme","palette","primary","main","secondary","ProtectedRoute","_ref","children","token","localStorage","getItem","userRole","console","log","isAuthenticated","isAdmin","to","replace","App","sx","display","flexDirection","minHeight","flex","py","path","element"],"sources":["/Users/arifkhan/bike-service-booking/frontend-react/src/App.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { ThemeProvider, createTheme, CssBaseline } from '@mui/material';\nimport AdminDashboard from './pages/AdminDashboard';\nimport HomePage from './pages/HomePage';\nimport LoginPage from './pages/LoginPage';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport { Box } from '@mui/material';\nimport EditBooking from './pages/EditBooking';\nimport WhatsAppButton from './components/WhatsAppButton';\nimport PrivacyPolicy from './pages/PrivacyPolicy';\n\n// Create theme instance\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#1976d2',\n    },\n    secondary: {\n      main: '#dc004e',\n    },\n  },\n});\n\n// Protected Route wrapper component\nconst ProtectedRoute: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const token = localStorage.getItem('token');\n  const userRole = localStorage.getItem('userRole');\n  \n  useEffect(() => {\n    console.log('Auth Debug:', { \n      token: !!token, \n      userRole,\n      isAuthenticated: !!token,\n      isAdmin: userRole === 'ADMIN'\n    });\n  }, [token, userRole]);\n\n  // Check authentication\n  if (!token) {\n    console.log('No token found, redirecting to login');\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Check admin role\n  if (userRole !== 'ADMIN') {\n    console.log('User is not admin, redirecting to home');\n    return <Navigate to=\"/\" replace />;\n  }\n\n  // User is authenticated and is an admin\n  return <>{children}</>;\n};\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <Box sx={{ \n          display: 'flex',\n          flexDirection: 'column',\n          minHeight: '100vh'\n        }}>\n          <Header />\n          <Box sx={{ flex: 1, py: 2 }}>\n            <Routes>\n              <Route path=\"/\" element={<HomePage />} />\n              <Route path=\"/login\" element={<LoginPage />} />\n              <Route path=\"/privacy-policy\" element={<PrivacyPolicy />} />\n              <Route \n                path=\"/admin/dashboard\" \n                element={\n                  <ProtectedRoute>\n                    <AdminDashboard />\n                  </ProtectedRoute>\n                } \n              />\n              <Route \n                path=\"/admin/bookings/edit/:id\" \n                element={\n                  <ProtectedRoute>\n                    <EditBooking />\n                  </ProtectedRoute>\n                } \n              />\n              <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n            </Routes>\n          </Box>\n          <WhatsAppButton />\n          <Footer />\n        </Box>\n      </Router>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}